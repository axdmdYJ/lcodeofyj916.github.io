<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="总之岁月漫长,然而值得等待"><meta name="theme-color" content="#2d4356"><meta name="baidu-site-verification"><title>进程管理 | Lorain's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.png"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Lorain's Blog" type="application/atom+xml">
</head><link rel="stylesheet" type="text/css" href="/plugins/highlight/atom-one-dark.min.css"><script type="text/javascript" src="/plugins/highlight/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();
</script><script type="text/javascript" src="/js/ready.js" async></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><body class="night"><div class="mobile-head" id="mobile-head"><div class="navbar-icon"><span></span><span></span><span></span></div><div class="navbar-title"><a href="/">LITREILY</a></div><div class="navbar-search"><!--= show a circle here--></div></div><div class="h-wrapper" id="menu"><nav class="h-head box"><div class="m-hdimg"><a class="hdimg img" href="/"><img class="nofancybox" src="/img/profile.jpg" width="128" height="128"></a><h1 class="ttl"><a href="/">Lorain's Blog</a></h1></div><p class="m-desc">心之所向，无惧无悔,<br>愿求仁得仁，复无怨怼！</p><div class="m-nav"><ul><li><span class="dot">●</span><a href="/archives/">归档</a></li><li><span class="dot">●</span><a href="/categories/">分类</a></li><li><span class="dot">●</span><a href="/tags/">标签</a></li><li><span class="dot">●</span><a href="/about/">关于</a></li><li><span class="dot">●</span><a href="/atom.xml">RSS</a></li><li class="m-sch"><form class="form" id="j-formsch" method="get"><input class="txt" type="text" id="local-search-input" name="q" value="搜索" onfocus="if(this.value=='搜索'){this.value='';}" onblur="if(this.value==''){this.value='搜索';}"><input type="text" style="display:none;"></form></li></ul><div id="local-search-result"></div></div></nav></div><div id="back2Top"><a class="fa fa-arrow-up" title="Back to top" href="#"></a></div><div class="box" id="container"><div class="l-wrapper"><div class="l-content box"><div class="l-post l-post-art"><article class="p-art"><div class="p-header box"><h1 class="p-title">进程管理</h1><div class="p-info"><span class="p-date"><i class="fa fa-calendar"></i><a href="/posts/852cfab6.html">2024-04-09</a></span><span class="p-category"><i class="fa fa-folder"></i><a href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></span><span class="p-view" id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span></span></div></div><div class="p-content"><meta name="referrer" content="no-referrer" />


<h2 id="进程的概念，组成特征"><a href="#进程的概念，组成特征" class="headerlink" title="进程的概念，组成特征"></a>进程的概念，组成特征</h2><h3 id="知识总览"><a href="#知识总览" class="headerlink" title="知识总览"></a>知识总览</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702606926-185560f5-3727-4a74-a795-702724ad4995.png#averageHue=%23d4d0cb&clientId=ucbe49618-2be1-4&from=paste&id=u272d463f&originHeight=414&originWidth=1753&originalType=url&ratio=1.5&rotation=0&showTitle=false&status=done&style=none&taskId=ud6ece8e7-5d4c-416d-9ed5-14535cb8fa2&title="></p>
<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>程<strong>序段、数据段、PCB三部分组成了进程实体（进程映像</strong>）。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702670456-458c1b77-1257-4b96-8d14-5b3717110a63.png#averageHue=%23d2cbc9&clientId=ucbe49618-2be1-4&from=paste&height=550&id=u0ce6225c&originHeight=825&originWidth=1624&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=824981&status=done&style=none&taskId=u248e4d06-883e-4d6c-8207-2d04dab227b&title=&width=1082.6666666666667" alt="image.png"><br>我们一般把进程实体简称为进程。<br><strong>PCB是进程存在的唯一标志</strong><br>如：创建进程，是创建进程实体中的PCB；撤销实体是撤销PCB。<br>从不同的角度，进程可以有不同的定义：<br>1.进程是程序的一次执行过程<br>2.进程是一个程序及其数据在处理机上顺序执行时所发生的活动。<br>3.进程是具有独立功能的程序在<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E9%9B%86&spm=1001.2101.3001.7020">数据集</a>合上运行的过程（强调“动态性”它是系统进行资源分配和调度的一个独立单位。<br>引入进程实体的概念后，可把进程定义为：<br>进程是进程实体的运行过程，是系统进行资源分配和调度的一个独立单位。<br>注：严格来说，进程实体和进程不同。进程实体是静态的，进程是动态的。不过，除非题目专门考察二者区别，否则可以认为进程实体就是进程。</p>
<h3 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h3><p>进程由程序段、数据段、PCB组成。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702606760-15a3933a-4f0c-482b-bcf4-df479b9cdc1b.png#averageHue=%239aa35f&clientId=ucbe49618-2be1-4&from=paste&id=udbf1ad6b&originHeight=668&originWidth=915&originalType=url&ratio=1.5&rotation=0&showTitle=false&status=done&style=none&taskId=u7a582afb-9bad-4b69-aacb-a55e6f3a199&title="><br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702801739-d3e5e359-4c4a-4959-82e4-dc0c82c9d230.png#averageHue=%23d0a07f&clientId=ucbe49618-2be1-4&from=paste&height=786&id=ue616bc25&originHeight=865&originWidth=1637&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=567803&status=done&style=none&taskId=ud6050aa5-a5ca-4817-991b-540490f1538&title=&width=1488.1817859263467" alt="image.png"><br>组成：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702607130-9464480b-beb2-432f-b453-edac5eb3d55b.png#averageHue=%2391b471&clientId=ucbe49618-2be1-4&from=paste&id=u7557eca9&originHeight=822&originWidth=1670&originalType=url&ratio=1.5&rotation=0&showTitle=false&status=done&style=none&taskId=u39dbc3ae-dbca-4921-9e62-1f746934f18&title="><br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702990634-c520c32a-50a0-431d-81e8-8da24de9bad0.png#averageHue=%23dfdddc&clientId=ucbe49618-2be1-4&from=paste&height=832&id=uf9adc9a5&originHeight=915&originWidth=1696&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=814466&status=done&style=none&taskId=ucb0ad733-3083-4c37-87f8-5bcee263cb8&title=&width=1541.8181484001734" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702606732-f680ba7f-fc3a-4d65-be5e-5a6323c1e59f.png#averageHue=%2395b377&clientId=ucbe49618-2be1-4&from=paste&id=u6871591d&originHeight=795&originWidth=1457&originalType=url&ratio=1.5&rotation=0&showTitle=false&status=done&style=none&taskId=u5294c4cc-5232-4720-ae67-5925ed6628b&title="></p>
<h3 id="组织"><a href="#组织" class="headerlink" title="组织"></a>组织</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711932805358-43b5844c-127b-44ad-86db-832e68bb4469.png#averageHue=%23d6d8d2&clientId=ubea11f0f-9fad-4&from=paste&height=822&id=u46b89bf2&originHeight=1480&originWidth=2764&originalType=binary&ratio=1.7999999523162842&rotation=0&showTitle=false&size=1731620&status=done&style=none&taskId=ub13d07b7-e3c0-4968-8253-c5100fbfa19&title=&width=1535.555596233887" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702606975-e240e51b-410c-468a-99c7-ddf267a3f688.png#averageHue=%23f6f6f6&clientId=ucbe49618-2be1-4&from=paste&id=u2a365a7d&originHeight=629&originWidth=1660&originalType=url&ratio=1.5&rotation=0&showTitle=false&status=done&style=none&taskId=ua3fdcf2e-e83f-4715-a483-3077df57120&title="></p>
<p>链接方式：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702607926-11e2cd34-9447-4f58-99e4-ae497e44aa26.png#averageHue=%2389b266&clientId=ucbe49618-2be1-4&from=paste&id=ud6eb3277&originHeight=854&originWidth=1570&originalType=url&ratio=1.5&rotation=0&showTitle=false&status=done&style=none&taskId=u0bda5818-ca95-42ab-95f8-cda1195c1bc&title=">索引方式：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702607736-b0635c3a-fec3-4cb1-b75a-b2c7336c1186.png#averageHue=%23fdfefc&clientId=ucbe49618-2be1-4&from=paste&id=uec4bd078&originHeight=804&originWidth=1283&originalType=url&ratio=1.5&rotation=0&showTitle=false&status=done&style=none&taskId=ud1746f74-2488-495b-9cf4-69a306a264b&title="><br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711932744464-76aad909-c08b-4872-a866-116fc55e32ee.png#averageHue=%23dddad9&clientId=ubea11f0f-9fad-4&from=paste&height=774&id=u0f5b013f&originHeight=1394&originWidth=2750&originalType=binary&ratio=1.7999999523162842&rotation=0&showTitle=false&size=1654590&status=done&style=none&taskId=u97644707-b519-4ea7-bea7-957a4a85207&title=&width=1527.7778182500685" alt="image.png"></p>
<h3 id="特征"><a href="#特征" class="headerlink" title="特征"></a>特征</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702607720-fbbb1069-9f3e-4a93-98f5-940b3396814f.png#averageHue=%23a0bb86&clientId=ucbe49618-2be1-4&from=paste&id=uab76709d&originHeight=886&originWidth=1818&originalType=url&ratio=1.5&rotation=0&showTitle=false&status=done&style=none&taskId=u47c128a7-5816-40f4-8e6b-0ea56599566&title="></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711702608172-3d470317-b230-46ce-b50a-1829792f3c1d.png#averageHue=%239fbc83&clientId=ucbe49618-2be1-4&from=paste&id=u232a8457&originHeight=942&originWidth=1537&originalType=url&ratio=1.5&rotation=0&showTitle=false&status=done&style=none&taskId=u70878fc0-dfb7-47a8-99f5-6a4dbe0838e&title="><br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711932920592-b960646f-6ebc-4891-8a36-d41ce7373003.png#averageHue=%23e2e4d9&clientId=ubea11f0f-9fad-4&from=paste&height=783&id=uf206525d&originHeight=1410&originWidth=2516&originalType=binary&ratio=1.7999999523162842&rotation=0&showTitle=false&size=1416410&status=done&style=none&taskId=u6de73de1-8712-4bbf-869e-1558a766146&title=&width=1397.7778148062446" alt="image.png"></p>
<h2 id="进程的控制"><a href="#进程的控制" class="headerlink" title="进程的控制"></a>进程的控制</h2><h3 id="知识总览-1"><a href="#知识总览-1" class="headerlink" title="知识总览"></a>知识总览</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711933178424-3672b686-1f1c-4d97-b747-738e8efcd432.png#averageHue=%23fbfbfb&clientId=ubea11f0f-9fad-4&from=paste&id=u8dd78a57&originHeight=647&originWidth=1406&originalType=url&ratio=1.7999999523162842&rotation=0&showTitle=false&status=done&style=none&taskId=uddfde8f3-937d-436d-803a-1ad295688b3&title="></p>
<h3 id="什么是进程控制"><a href="#什么是进程控制" class="headerlink" title="什么是进程控制"></a>什么是进程控制</h3><p>进程控制的主要功能是对系统中的所有进程实施有效的管理，它具有创建新进程、撤销已有进程、实现<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81&spm=1001.2101.3001.7020">进程状态</a>转换等功能。<br>简化理解：进程控制是要实现进程状态转换。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711933178358-249b229a-18fe-492a-96d7-e403bf698382.png#averageHue=%23fcf8f6&clientId=ubea11f0f-9fad-4&from=paste&id=u76cb7147&originHeight=466&originWidth=1722&originalType=url&ratio=1.7999999523162842&rotation=0&showTitle=false&status=done&style=none&taskId=u1778ae2a-b43f-4458-aa00-3038fa5921a&title="></p>
<h3 id="如何实现进程控制"><a href="#如何实现进程控制" class="headerlink" title="如何实现进程控制"></a>如何实现进程控制</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711933178870-1143fe56-3cb0-43d4-9188-37e32018a4a3.png#averageHue=%23a4c089&clientId=ubea11f0f-9fad-4&from=paste&id=u8a1221d2&originHeight=1058&originWidth=1859&originalType=url&ratio=1.7999999523162842&rotation=0&showTitle=false&status=done&style=none&taskId=u83aa61f7-1dc1-482a-848d-24924cb26dc&title="><strong>原语</strong><br>用原语实现进程控制。<br><strong>原语的特点是：执行期间不允许中断，只能一气呵成。</strong><br>原语采用“关中断指令”和“开中断指令”实现。<br>原语运行在核心态。<br>开&#x2F;关 中断指令权限很大，是只能在核心态下执行的特权指令。<br>程序开头-&gt;程序结尾开关中短指令</p>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711933178323-424da464-a775-4758-aa28-d848181d8156.png#averageHue=%23e1e7d7&clientId=ubea11f0f-9fad-4&from=paste&id=uaebe98e6&originHeight=590&originWidth=1556&originalType=url&ratio=1.7999999523162842&rotation=0&showTitle=false&status=done&style=none&taskId=u63958486-c6e0-4ef3-ae07-3e1d5431859&title="></p>
<h3 id="控制相关的原语"><a href="#控制相关的原语" class="headerlink" title="控制相关的原语"></a>控制相关的原语</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711933178319-d710cb04-06b5-46bc-9107-c760453e5ae4.png#averageHue=%23ebebeb&clientId=ubea11f0f-9fad-4&from=paste&id=ubd213cf8&originHeight=331&originWidth=1487&originalType=url&ratio=1.7999999523162842&rotation=0&showTitle=false&status=done&style=none&taskId=u7da03079-d2ca-4fef-be57-7fad7274bfe&title=">进程创建原语：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711933179126-f8e5ee8b-ce1c-43b7-8bd4-ed7a81213934.png#averageHue=%23cddac0&clientId=ubea11f0f-9fad-4&from=paste&id=u85c5d6fe&originHeight=543&originWidth=1805&originalType=url&ratio=1.7999999523162842&rotation=0&showTitle=false&status=done&style=none&taskId=uf4c5a819-f3b4-444c-b1aa-9e2cd8e1269&title=">进程终止原语：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711933179161-a1f7cded-b01f-40bb-a60c-2674730efcb9.png#averageHue=%23b3c69f&clientId=ubea11f0f-9fad-4&from=paste&id=u6d9803be&originHeight=591&originWidth=1531&originalType=url&ratio=1.7999999523162842&rotation=0&showTitle=false&status=done&style=none&taskId=u5b5ce753-6653-404e-a910-87fc604917f&title=">进程阻塞和唤醒原语：<strong>成对使用</strong><br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711933179177-964867f6-7ac7-4a08-9ff6-4deeb7bef30b.png#averageHue=%23b0c998&clientId=ubea11f0f-9fad-4&from=paste&id=u7091c52a&originHeight=682&originWidth=1853&originalType=url&ratio=1.7999999523162842&rotation=0&showTitle=false&status=done&style=none&taskId=u15d9fabb-9dfe-4a4b-9ab6-a50d47427f2&title=">切换原语：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711933179464-d650c445-e11f-44d2-b7dc-4126b77b03a5.png#averageHue=%23a4c289&clientId=ubea11f0f-9fad-4&from=paste&id=ubd794149&originHeight=645&originWidth=1337&originalType=url&ratio=1.7999999523162842&rotation=0&showTitle=false&status=done&style=none&taskId=ucdd3e213-a91a-4ec0-b4dd-68df9f74d0a&title="><br>结合程序是如何运行的来理解：<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712146526958-83029fd0-0735-493c-b0db-e1fd2ffefc84.png#averageHue=%23a99d6d&clientId=u69e60934-0f15-4&from=paste&height=1178&id=u4aa97809&originHeight=1178&originWidth=2435&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1291993&status=done&style=none&taskId=u56eb8570-f7e0-4daf-8236-2ede27eacb3&title=&width=2435" alt="image.png"><br>通过PCB 保存信息， 来达到防止切换进程，导致PSW， PC， IR内容被覆盖，<br>（这里的PCB有点像程序计数器的意思？）</p>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1711933180159-d0ad9da9-35f2-4563-b631-f07b705ff133.png#averageHue=%23f8f9f6&clientId=ubea11f0f-9fad-4&from=paste&id=u2eda4cc6&originHeight=764&originWidth=1608&originalType=url&ratio=1.7999999523162842&rotation=0&showTitle=false&status=done&style=none&taskId=u3a8d6663-b59c-43b5-ab8d-3b5dab4fa0a&title="><br>无论哪个进程控制原语，要做的无非三类事情：</p>
<ol>
<li>更新PCB中的信息</li>
<li>将PCB插入合适的队列</li>
<li>分配&#x2F;回收资源</li>
</ol>
<h2 id="进程通信"><a href="#进程通信" class="headerlink" title="进程通信"></a>进程通信</h2><p>进程间通信（Inter-ProcessCommunication,IPC）是指两个进程之间产生数据交互。</p>
<h3 id="为什么需要操作系统支持"><a href="#为什么需要操作系统支持" class="headerlink" title="为什么需要操作系统支持"></a>为什么需要操作系统支持</h3><p>一个进程不能访问其他进程的空间，比如垃圾软件访问你微信，不久g了。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712147039378-0e4dbde4-1a3b-4585-81de-552916962d09.png#averageHue=%23cfcfcf&clientId=u69e60934-0f15-4&from=paste&height=396&id=u595ca00c&originHeight=396&originWidth=710&originalType=binary&ratio=1&rotation=0&showTitle=false&size=95321&status=done&style=none&taskId=u1b3f1f57-0a99-4c96-be92-d9651ca2f4a&title=&width=710" alt="image.png"></p>
<h3 id="共享存储"><a href="#共享存储" class="headerlink" title="共享存储"></a>共享存储</h3><p>通过一个共享存储区来实现共享存储<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712147448041-5dd8c9ca-04dd-47d6-8d48-31fea840ed4c.png#averageHue=%23e7e4e1&clientId=u69e60934-0f15-4&from=paste&height=1146&id=u6cfa4d0c&originHeight=1146&originWidth=2150&originalType=binary&ratio=1&rotation=0&showTitle=false&size=814534&status=done&style=none&taskId=u404e6cd3-bf65-4178-b4ab-c8850d5253e&title=&width=2150" alt="image.png">基干存储区的共享：操作系统在内存中划出一块共享存储区，数据的形式、存放位置都由通信进程控制，而不是操作系统。这种共享方式速度很快，是一种高级通信：<br>基于数据结构的天享：比如共享空间里只能放一个长度为10的数组。这种共享方式速度慢、限制多，是一种低级通信方式<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712147620119-c1b2b486-63c8-4c04-9601-1c2f3264f1eb.png#averageHue=%23e8e4e1&clientId=u69e60934-0f15-4&from=paste&height=1000&id=uc820ddee&originHeight=1000&originWidth=2047&originalType=binary&ratio=1&rotation=0&showTitle=false&size=804158&status=done&style=none&taskId=u5ac516c5-b21d-4d8c-a57b-f9903554884&title=&width=2047" alt="image.png"></p>
<h3 id="消息传递"><a href="#消息传递" class="headerlink" title="消息传递"></a>消息传递</h3><ul>
<li>直接通信方式</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712148010144-382c4fb5-1db7-400b-a789-7e151e66d171.png#averageHue=%23eadfda&clientId=u69e60934-0f15-4&from=paste&height=1030&id=u463c6e72&originHeight=1030&originWidth=2074&originalType=binary&ratio=1&rotation=0&showTitle=false&size=670767&status=done&style=none&taskId=ubf310d62-2882-4008-9f10-b5fd4a787f8&title=&width=2074" alt="image.png"><br>进程P发消息到操作系统的内核中， Q在其中找P的消息，找到之后放到进程Q的地址空间中。</p>
<ul>
<li>间接通信方式</li>
</ul>
<p> <img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712148394959-268b5290-56b5-46c9-a4c9-043e8fac8bd7.png#averageHue=%23e7e5e4&clientId=u69e60934-0f15-4&from=paste&height=1130&id=uc398350f&originHeight=1130&originWidth=1723&originalType=binary&ratio=1&rotation=0&showTitle=false&size=714517&status=done&style=none&taskId=u12baf0bf-d366-4ec7-928f-be4dfb6b4f9&title=&width=1723" alt="image.png"><br>进程P将信息发送到信箱A中， 进程Q从信箱取出来。<br>相比直接通信方式，间接通信方式可以在一个信箱recive来自多个进程的消息，而直接通信是点名到姓的方式来进行。</p>
<ul>
<li>管道通信方式</li>
</ul>
<p>FIFO，类似于队列。本质就是在内存中开辟一个大小固定的缓冲区。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712148713397-e373766e-ab72-4563-ab32-214a0bad6cc3.png#averageHue=%23efeeee&clientId=u69e60934-0f15-4&from=paste&height=1135&id=uf0a68024&originHeight=1135&originWidth=1998&originalType=binary&ratio=1&rotation=0&showTitle=false&size=739208&status=done&style=none&taskId=u16826606-d9f2-4ce7-b587-3e26af76c9e&title=&width=1998" alt="image.png"><br>这里的管道缓冲区可以理解为一个循环队列。</p>
<blockquote>
<p>和共享内存有什么区别呢?</p>
</blockquote>
<p>管道通信是先进先出。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712149058551-00f7622c-43aa-4a7a-81df-e56f83dcc236.png#averageHue=%23dfdad7&clientId=u69e60934-0f15-4&from=paste&height=634&id=u5680989a&originHeight=634&originWidth=1879&originalType=binary&ratio=1&rotation=0&showTitle=false&size=444023&status=done&style=none&taskId=u33867ca1-74f6-4230-a721-e10dbeb0840&title=&width=1879" alt="image.png"></p>
<ol>
<li>管道只能采用半双工通信，某一时间段内只能实现单向的传输。如果要实现双向同时通信，则需要设置两个管道。</li>
<li>各进程要互斥地访问管道（由操作系统实现）</li>
<li>当管道写满时，写进程将阻塞，直到读进程将管道中的数据取走，即可唤醒写进程。</li>
<li>当管道读空时，读进程将阻塞，直到写进程往管道中写入数据，即可唤醒读进程。</li>
<li>管道中的数据一旦被读出，就彻底消失。因此，当多个进程读同一个管道时，可能会错乱。对此，通常有两种解决方案：①一个管道允许多个写进程，（1个读进程2014年408真题高教社官方答案）；②允许有多个写进程，多个读进程，但系统会让各个个读进程轮流从管道中读数据（Linux 的方案）。</li>
</ol>
<h3 id="知识点梳理"><a href="#知识点梳理" class="headerlink" title="知识点梳理"></a>知识点梳理</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712149257101-fd8a1d6b-e4b6-4789-bb93-daf051ee8ec9.png#averageHue=%23e6e6e6&clientId=u69e60934-0f15-4&from=paste&height=1076&id=u21793875&originHeight=1076&originWidth=1957&originalType=binary&ratio=1&rotation=0&showTitle=false&size=569538&status=done&style=none&taskId=u3addef58-afe5-4b1c-bbb7-dbaddbef6ff&title=&width=1957" alt="image.png"><br>内存缓冲区<br>半双工通信<br>互斥访问管道</p>
<p>写进程往管道写数据，即便管道没被写满，只要管道没空，读进程就可以从管道读数据<br>读进程从管道读数据，即便管道没被读空，只要管道没满，写进程就可以往管道写数据</p>
<h2 id="线程的概念"><a href="#线程的概念" class="headerlink" title="线程的概念"></a>线程的概念</h2><h3 id="为什么引入线程"><a href="#为什么引入线程" class="headerlink" title="为什么引入线程"></a>为什么引入线程</h3><p>传统的进程，只能串行的去处理程序，程序执行流的最小单位是进程。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712159723928-235ad70a-7e2d-4621-9654-98b7f2cbd2c9.png#averageHue=%23fefefc&clientId=ucd5fe55e-4a30-4&from=paste&height=478&id=ua0e1014d&originHeight=956&originWidth=648&originalType=binary&ratio=2&rotation=0&showTitle=false&size=206800&status=done&style=none&taskId=u1ab47386-5e5f-452f-9919-a41e8350115&title=&width=324" alt="image.png"><br>引入线程后，线程成为执行流的最小单位，增加了并发度。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712159771783-c7d1f58b-61d5-49fb-8873-18f41447c378.png#averageHue=%23b3c39f&clientId=ucd5fe55e-4a30-4&from=paste&height=555&id=u420d20b1&originHeight=1110&originWidth=1574&originalType=binary&ratio=2&rotation=0&showTitle=false&size=706778&status=done&style=none&taskId=ue5b1fa80-4ee1-4611-bbad-a0d65a1c8d2&title=&width=787" alt="image.png"><br>可以把线程理解“轻量级进程”。 线程是一个基本的CPU执行单元，也是程序执行流的最小单位。 引入线程之后，不仅是进程之间 可以并发，进程内的各线程之间 也可以并发，从而进一步提升了 系统的并发度，使得一个进程内 也可以并发处理各种任务（如QQ视频、文字聊天、传文件） 引入线程后，进程只作为除CPU之 外的系统资源的分配单元（如打 印机、内存地址空间等都是分配给进程的）<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712159897468-99c0dda4-c09f-45b2-8ece-7465b6b6beeb.png#averageHue=%23cbd1c2&clientId=ucd5fe55e-4a30-4&from=paste&height=665&id=u31a41bca&originHeight=1330&originWidth=1684&originalType=binary&ratio=2&rotation=0&showTitle=false&size=751044&status=done&style=none&taskId=u5d13be7e-d69c-4957-9c6d-4889a4afdbd&title=&width=842" alt="image.png"></p>
<h3 id="引入线程机制后有什么变化"><a href="#引入线程机制后有什么变化" class="headerlink" title="引入线程机制后有什么变化"></a>引入线程机制后有什么变化</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712159987826-bac03288-5e48-480d-9068-50cd216c6599.png#averageHue=%23dfb4ae&clientId=ucd5fe55e-4a30-4&from=paste&height=653&id=u9980197f&originHeight=1306&originWidth=2750&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1434652&status=done&style=none&taskId=u7495bab8-e929-4e31-834a-fb3fe768cd1&title=&width=1375" alt="image.png"></p>
<h3 id="线程的属性"><a href="#线程的属性" class="headerlink" title="线程的属性"></a>线程的属性</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712160077081-b69aac13-df0a-4833-8074-2d554a5873c7.png#averageHue=%23e0e0e0&clientId=ucd5fe55e-4a30-4&from=paste&height=712&id=u71b9d6e5&originHeight=1424&originWidth=2190&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1098146&status=done&style=none&taskId=u713d9556-ce9f-4c31-b1de-bf48f863705&title=&width=1095" alt="image.png"></p>
<h2 id="线程的实现方式和多线程模型"><a href="#线程的实现方式和多线程模型" class="headerlink" title="线程的实现方式和多线程模型"></a>线程的实现方式和多线程模型</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712160674319-af921095-723f-49fe-ab44-1a4b95a216b1.png#averageHue=%23d5d5d5&clientId=u4e4148cf-5ca9-4&from=paste&height=447&id=ufaf0d73e&originHeight=894&originWidth=1858&originalType=binary&ratio=2&rotation=0&showTitle=false&size=320556&status=done&style=none&taskId=u3439f818-9f0b-4bf0-8168-bcab3ea8550&title=&width=929" alt="image.png"></p>
<h3 id="线程的实现方式"><a href="#线程的实现方式" class="headerlink" title="线程的实现方式"></a>线程的实现方式</h3><h4 id="早期"><a href="#早期" class="headerlink" title="早期"></a>早期</h4><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712241447827-333fbc2c-174f-4ac7-8401-73a333174c5a.png#averageHue=%23acabaa&clientId=ud9dcd271-f44b-4&from=paste&height=610&id=u11ae1a87&originHeight=1220&originWidth=1378&originalType=binary&ratio=2&rotation=0&showTitle=false&size=466279&status=done&style=none&taskId=uc2c8fb16-c494-487c-a288-28339e9bb35&title=&width=689" alt="image.png"><br>早期没有_线程，通过线程库来实现“逻辑”的的线程。比如:_<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712241337177-5e5d8ccd-c28c-4f24-868c-3e02b364c4ae.png#averageHue=%23c7c7c7&clientId=ud9dcd271-f44b-4&from=paste&height=347&id=ue5fc7c94&originHeight=694&originWidth=1176&originalType=binary&ratio=2&rotation=0&showTitle=false&size=256151&status=done&style=none&taskId=u032b504f-d9f3-4826-8ed0-433d5c02b1e&title=&width=588" alt="image.png"><br>用户级线程管理操作不是由操作系统完成的，而是通过程序来完成的。</p>
<hr>
<ol>
<li>用户级线程由应用程序通过线程库实现，所有的线程管理工作都由应用程序负责（包括线程切换）</li>
<li>用户级线程中，线程切换可以在用户态下即可完成，无需操作系统干预。</li>
<li>在用户看来，是有多个线程。但是在操作系统内核看来，并意识不到线程的存在。“用户级线程” 就是“从用户视角看能看到的线程”</li>
<li>优缺点</li>
</ol>
<p>优点：用户级线程的切换在用户空间即可完成，不需要切换到核心态，线程管理的系统开销小，效率高<br>缺点：当一个用户级线程被阻塞后，整个进程都会被阻塞， 并发度不高。多个线程不可在多核处理机上并行运行。</p>
<h4 id="现代"><a href="#现代" class="headerlink" title="现代"></a>现代</h4><ul>
<li>一对一</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712242404183-0a210f1f-37a5-428e-8783-32ca2d9726a7.png#averageHue=%23c7c4c3&clientId=ud9dcd271-f44b-4&from=paste&height=682&id=u4189e306&originHeight=1364&originWidth=2798&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1501569&status=done&style=none&taskId=u840359e2-e122-430c-bf9d-51f3fbd4890&title=&width=1399" alt="image.png"></p>
<ul>
<li>多对一</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712242641315-d4e40df0-9fda-4418-9794-4c1fd94c1fa7.png#averageHue=%23c6c4c3&clientId=ud9dcd271-f44b-4&from=paste&height=564&id=u5b30b1b9&originHeight=1128&originWidth=2792&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1011640&status=done&style=none&taskId=u97ab9de3-2511-4a8d-9fa4-bf4e7b4c577&title=&width=1396" alt="image.png"></p>
<ul>
<li>多对多</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712242828321-c05e4db0-db01-4e9c-ac56-5ebda12a53b6.png#averageHue=%23c4bdbb&clientId=ud9dcd271-f44b-4&from=paste&height=721&id=u016eb3f6&originHeight=1442&originWidth=2770&originalType=binary&ratio=2&rotation=0&showTitle=false&size=2133027&status=done&style=none&taskId=ub5fff3e8-8c74-4335-a20a-911f3e48cb0&title=&width=1385" alt="image.png"></p>
<h3 id="知识回顾"><a href="#知识回顾" class="headerlink" title="知识回顾"></a>知识回顾</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712242860495-fb13ac64-43e9-453f-beb0-7927e5c3219e.png#averageHue=%23d9d9d9&clientId=ud9dcd271-f44b-4&from=paste&height=675&id=udb4b5809&originHeight=1350&originWidth=2458&originalType=binary&ratio=2&rotation=0&showTitle=false&size=842112&status=done&style=none&taskId=u9b625a76-b274-400e-8f1a-7566af77a10&title=&width=1229" alt="image.png"></p>
<h2 id="线程的状态与转换"><a href="#线程的状态与转换" class="headerlink" title="线程的状态与转换"></a>线程的状态与转换</h2><h3 id="状态与转换"><a href="#状态与转换" class="headerlink" title="状态与转换"></a>状态与转换</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712242972041-110b43c1-b505-4192-a4a2-fa3862fac20a.png#averageHue=%23dbdbdb&clientId=ud9dcd271-f44b-4&from=paste&height=497&id=aMA6b&originHeight=994&originWidth=1814&originalType=binary&ratio=2&rotation=0&showTitle=false&size=300618&status=done&style=none&taskId=ua14b509b-9b67-442a-b0f3-3350323334e&title=&width=907" alt="image.png"></p>
<h3 id="组织与控制"><a href="#组织与控制" class="headerlink" title="组织与控制"></a>组织与控制</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712243169505-2e03a4d0-e798-4075-abe0-c78e544b8acf.png#averageHue=%23e1e0df&clientId=ud9dcd271-f44b-4&from=paste&height=599&id=u84d6ab3f&originHeight=1198&originWidth=2662&originalType=binary&ratio=2&rotation=0&showTitle=false&size=607747&status=done&style=none&taskId=u559dd93e-7819-471a-81ee-d844bcc5448&title=&width=1331" alt="image.png"><br>主要根进程的PCB类似。<br>堆栈指针 主要记录，比如a调用b， 值赋给c这些，<br>堆栈指针，指的是内存中的堆栈。</p>
<h2 id="处理机调度"><a href="#处理机调度" class="headerlink" title="处理机调度"></a>处理机调度</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712243340304-afcc6284-6483-41ec-81cc-63fce46fc885.png#averageHue=%23dedede&clientId=ud9dcd271-f44b-4&from=paste&height=618&id=u648c57a2&originHeight=1236&originWidth=2382&originalType=binary&ratio=2&rotation=0&showTitle=false&size=834149&status=done&style=none&taskId=u9b8d4d24-95cf-4e35-88c5-9452edfe837&title=&width=1191" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712285179779-61b6356e-bbb9-4089-8089-48b9d015b214.png#averageHue=%23bcbcbc&clientId=ud9dcd271-f44b-4&from=paste&height=406&id=u66ebfbd8&originHeight=812&originWidth=2624&originalType=binary&ratio=2&rotation=0&showTitle=false&size=758797&status=done&style=none&taskId=uf428f732-7a1e-4ddb-9e69-d5e0aa94f10&title=&width=1312" alt="image.png"><br>当有一堆任务要处理，但由于资源有限，这些事情没法同时处理。这就需要确定某种规则来决定处理<br>这些任务的顺序，这就是“调度”研究的问题。</p>
<h3 id="高级调度"><a href="#高级调度" class="headerlink" title="高级调度"></a>高级调度</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712285323177-3a3df526-fdf4-44a0-ae6b-07cac7273e14.png#averageHue=%23e0dedd&clientId=ud9dcd271-f44b-4&from=paste&height=666&id=u8a9767f6&originHeight=1332&originWidth=2748&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1387285&status=done&style=none&taskId=u77213a42-11e2-4dc8-85c7-f88adb0ab98&title=&width=1374" alt="image.png"></p>
<h3 id="低级调度"><a href="#低级调度" class="headerlink" title="低级调度"></a>低级调度</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712285382113-60494624-dfda-4fa9-87a2-353c5dc05ec5.png#averageHue=%23c0c0c0&clientId=ud9dcd271-f44b-4&from=paste&height=312&id=u83076c09&originHeight=624&originWidth=1720&originalType=binary&ratio=2&rotation=0&showTitle=false&size=423311&status=done&style=none&taskId=u63afc76a-3bbc-4036-96d9-97bbc06f9d9&title=&width=860" alt="image.png">低级调度（进程调度&#x2F;处理机调度）一—按照某种策略从就绪队列中选取一个进程，将处理机分配<br>给它。<br>进程调度是操作系统中最基本的一种调度，在一般的操作系统中都必须配置进程调度。<br>进程调度的频率很高，一般几十毫秒一次。</p>
<p>轮流的去cpu执行，用户感觉不到</p>
<h3 id="中级调度"><a href="#中级调度" class="headerlink" title="中级调度"></a>中级调度</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712285597146-5be30ebd-212a-4697-94ec-f0a80b4998d8.png#averageHue=%23efe0d6&clientId=ud9dcd271-f44b-4&from=paste&height=299&id=uaad64513&originHeight=598&originWidth=2224&originalType=binary&ratio=2&rotation=0&showTitle=false&size=579126&status=done&style=none&taskId=u8c00a1ad-c2b1-41e4-80b3-b7bdd030b19&title=&width=1112" alt="image.png"><br>内存不够时，可将某些进程的数据调出外存。等内存空闲或者进程需要运行时再重新调入内存。暂时调到外存等待的进程状态为挂起状态。被挂起的进程PCB会被组织成挂起队列<br><strong>中级调度（内存调度</strong>）一一按照某种策略诀定将哪个处上的进程重新调入内存。</p>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712285818671-233b307b-0380-4953-aa95-04f071902786.png#averageHue=%23cbcfc8&clientId=ud9dcd271-f44b-4&from=paste&height=584&id=ua615ed4c&originHeight=1168&originWidth=2624&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1486269&status=done&style=none&taskId=u6c6abce9-f904-4906-bb7f-ae3f94ac23b&title=&width=1312" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712285870751-baae90f8-a0d5-471a-8ada-048790de4854.png#averageHue=%23e2e1e1&clientId=ud9dcd271-f44b-4&from=paste&height=659&id=u7d3a9959&originHeight=1318&originWidth=2864&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1328567&status=done&style=none&taskId=u76cf1130-ac2d-40ec-8a5a-1209fe4a65c&title=&width=1432" alt="image.png"></p>
<h2 id="进程调度的时机切换与过程调度方式"><a href="#进程调度的时机切换与过程调度方式" class="headerlink" title="进程调度的时机切换与过程调度方式"></a>进程调度的时机切换与过程调度方式</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712300247045-8e1f06aa-03fc-44b6-8c89-257f7358f865.png#averageHue=%23dddddc&clientId=uabdbe3df-f9e2-4&from=paste&height=572&id=u722e48a8&originHeight=1144&originWidth=2106&originalType=binary&ratio=2&rotation=0&showTitle=false&size=791631&status=done&style=none&taskId=uc933ba32-8fa0-4f20-beaa-9efbb250833&title=&width=1053" alt="image.png"></p>
<h3 id="进程调度时机"><a href="#进程调度时机" class="headerlink" title="进程调度时机"></a>进程调度时机</h3><p>进程调度就是按照某种算法从就绪队列选择一个进程为其分配处理机。<br>注意什么时候需要进程调度，（主动放弃？&#x2F;被动放弃？）<br>什么时候不能进行进程调度？<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712300468726-2263c2e1-f8e3-4ca2-a7c2-d003917e4ac6.png#averageHue=%23dcdbd9&clientId=uabdbe3df-f9e2-4&from=paste&height=640&id=u28f319fd&originHeight=1280&originWidth=2554&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1400139&status=done&style=none&taskId=u4c45376d-374c-47d6-b66c-da92fd65e6a&title=&width=1277" alt="image.png"></p>
<h3 id="进程调度的时机"><a href="#进程调度的时机" class="headerlink" title="进程调度的时机"></a>进程调度的时机</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712300811241-d6dfdc2b-d8c6-4568-9cfd-6922a9f12de4.png#averageHue=%23dcdbdb&clientId=uabdbe3df-f9e2-4&from=paste&height=645&id=u314dcf92&originHeight=1290&originWidth=2760&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1699474&status=done&style=none&taskId=u4a608542-b070-415a-927c-7816f67de01&title=&width=1380" alt="image.png"><br>在内核临界区，访问资源会进行加锁，期间不能进行调度和切换。<br>在普通临界区，比如打印机，可以进行调度与切换。<br>所以真题说临界区不能进行处理机调度是错的，以偏概全。</p>
<h3 id="进程调度的方式"><a href="#进程调度的方式" class="headerlink" title="进程调度的方式"></a>进程调度的方式</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712301057968-0afa65ef-9c93-4d09-8b5a-22e921277c80.png#averageHue=%23dddddd&clientId=uabdbe3df-f9e2-4&from=paste&height=630&id=uc1feab2c&originHeight=1260&originWidth=2682&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1294521&status=done&style=none&taskId=uc00d92f9-f5bf-4a53-a29b-b158fbb98e9&title=&width=1341" alt="image.png"></p>
<h3 id="进程的切换与过程"><a href="#进程的切换与过程" class="headerlink" title="进程的切换与过程"></a>进程的切换与过程</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712301252243-597d3fa8-2f6f-4483-8503-fe782eca520a.png#averageHue=%23dadada&clientId=uabdbe3df-f9e2-4&from=paste&height=554&id=uabe02604&originHeight=1108&originWidth=2700&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1234600&status=done&style=none&taskId=u9767b69b-6c18-46a4-a426-d49e03745b7&title=&width=1350" alt="image.png"></p>
<h3 id="总结-2"><a href="#总结-2" class="headerlink" title="总结"></a>总结</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712301299088-aaf70dbe-ed70-4e92-9e7a-d389d638905f.png#averageHue=%23d7d4cf&clientId=uabdbe3df-f9e2-4&from=paste&height=767&id=uac4fcd64&originHeight=1534&originWidth=2486&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1478238&status=done&style=none&taskId=uc9bc5037-fa8e-4e02-a0a2-ef112b2f7da&title=&width=1243" alt="image.png"><br>进程的切换是有代价的，还有就是注意临界区的理解</p>
<h2 id="调度器，闲逛进程"><a href="#调度器，闲逛进程" class="headerlink" title="调度器，闲逛进程"></a>调度器，闲逛进程</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712301382758-98c0d170-3efb-462f-8e52-ae44791dc861.png#averageHue=%23d4d4d4&clientId=uabdbe3df-f9e2-4&from=paste&height=390&id=ua0bc5c29&originHeight=780&originWidth=1340&originalType=binary&ratio=2&rotation=0&showTitle=false&size=178807&status=done&style=none&taskId=ubb4fa1bb-3cf0-46bd-be8e-b89aff44f4f&title=&width=670" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712301522735-132606e1-f688-4262-958e-c6ce6d30a27c.png#averageHue=%23d9d7d7&clientId=uabdbe3df-f9e2-4&from=paste&height=628&id=u85b65b0f&originHeight=1256&originWidth=1370&originalType=binary&ratio=2&rotation=0&showTitle=false&size=593586&status=done&style=none&taskId=ub8cf9ed2-5e50-40a2-94c8-9bcdb421c21&title=&width=685" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712301586914-7ee2c868-d79f-40d3-8e3a-276f5f2a06da.png#averageHue=%23d4d4d4&clientId=uabdbe3df-f9e2-4&from=paste&height=334&id=u0eb847f2&originHeight=668&originWidth=2746&originalType=binary&ratio=2&rotation=0&showTitle=false&size=293555&status=done&style=none&taskId=u21fd9c3f-cbc4-4748-8633-9af58eb880e&title=&width=1373" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712301663786-e289b6e1-d166-4f4b-8c53-cef9dfef7316.png#averageHue=%23d6d6a7&clientId=uabdbe3df-f9e2-4&from=paste&height=676&id=u6b05b1f6&originHeight=1352&originWidth=1954&originalType=binary&ratio=2&rotation=0&showTitle=false&size=589755&status=done&style=none&taskId=u5cd8af9d-8e35-4aae-8785-e629a372587&title=&width=977" alt="image.png"></p>
<h2 id="调度算法的评价指标"><a href="#调度算法的评价指标" class="headerlink" title="调度算法的评价指标"></a>调度算法的评价指标</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712301698593-7662ae87-d406-48af-9dd2-201cbca0c1c8.png#averageHue=%23dbdbdb&clientId=uabdbe3df-f9e2-4&from=paste&height=441&id=u6f7c089f&originHeight=882&originWidth=2384&originalType=binary&ratio=2&rotation=0&showTitle=false&size=497067&status=done&style=none&taskId=u8f780eae-8dc1-4d9d-a432-bb44e14a915&title=&width=1192" alt="image.png"></p>
<ul>
<li>CPU利用率</li>
</ul>
<p>忙碌时间（CPU运行时间） &#x2F; 总时间。</p>
<ul>
<li>系统吞吐量</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712452106566-4c4c3398-f82e-4c17-8248-8a42daa60773.png#averageHue=%23d9d9d9&clientId=u29d4ccfe-e999-4&from=paste&height=433&id=u1c84bab2&originHeight=866&originWidth=1824&originalType=binary&ratio=2&rotation=0&showTitle=false&size=288024&status=done&style=none&taskId=u30564a2d-a36a-4596-9cf2-e610ee47c95&title=&width=912" alt="image.png"></p>
<ul>
<li>周转时间</li>
</ul>
<p>作业完成时间 - 作业提交时间<br>越短越好</p>
<ul>
<li>等待时间</li>
</ul>
<p>对于进程来说，等待时间就是指进程建立后等待被服务的时间之和，在等待I&#x2F;0完成的期间其实进程也是在被服务的，所以不计入等待时间。</p>
<ul>
<li>响应时间</li>
</ul>
<p>提交请求到首次产生响应<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712452510875-1fc1cfad-9a18-4fa6-b361-2ef1b12567d0.png#averageHue=%23dfdede&clientId=u29d4ccfe-e999-4&from=paste&height=678&id=u2216b92c&originHeight=1356&originWidth=2172&originalType=binary&ratio=2&rotation=0&showTitle=false&size=919273&status=done&style=none&taskId=ude7b8ad3-b2a0-49a4-bbdd-02ca96f2a8d&title=&width=1086" alt="image.png"></p>
<h2 id="调度算法"><a href="#调度算法" class="headerlink" title="调度算法"></a>调度算法</h2><ul>
<li>运行态→等待态：等待使用资源；</li>
<li>如等待外设传输；等待人工干预。</li>
<li>等待态→就绪态：资源得到满足；</li>
<li>如外设传输结束；人工干预完成。</li>
<li>运行态→就绪态：运行时间片到；</li>
</ul>
<h3 id="先来先服务"><a href="#先来先服务" class="headerlink" title="先来先服务"></a>先来先服务</h3><p>公平，先来的先服务，不会导致后来的还跟先来的去一样的抢锁。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712454871723-a9f19aab-c6ef-4d7c-b1ad-203f2f3e6203.png#averageHue=%23d3d1cf&clientId=u29d4ccfe-e999-4&from=paste&height=695&id=ufe34f697&originHeight=1390&originWidth=2660&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1684258&status=done&style=none&taskId=ud70136b1-4220-41e0-8c8e-3b0015882f4&title=&width=1330" alt="image.png"></p>
<h2 id="进程同步、互斥"><a href="#进程同步、互斥" class="headerlink" title="进程同步、互斥"></a>进程同步、互斥</h2><h3 id="进程同步、异步、临界区"><a href="#进程同步、异步、临界区" class="headerlink" title="进程同步、异步、临界区"></a>进程同步、异步、临界区</h3><p>进程同步就是为了解决异步读写操作带来的问题。</p>
<p>两种资源共享方式：</p>
<ul>
<li>互斥共享（一段时间只允许一个进程）</li>
<li>同时共享（宏观上同时）</li>
</ul>
<p>我们把一个时间段内只允许一个进程使用的资源称为临界资源。许多物理设备（比如摄像头、打印机）都属于临界资源。此外还有许多变量、数据、内存缓冲区等都属于临界资源。<br>对临界资源的访问，必须互斥地进行。互斥，亦称间接制约关系。进程互斥指当一个进程访问某临界资源时，另一个想要访问该临界资源的进程必须等待。当前访问临界资源的进程访问结束，释放该资源之后，另一个进程才能去访问临界资源。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712503463203-c14fb5be-c147-4eb5-809b-f51cbdd1f307.png#averageHue=%23cfd0cd&clientId=uccc0ee54-63cc-4&from=paste&height=395&id=ub8e3ebab&originHeight=790&originWidth=2326&originalType=binary&ratio=2&rotation=0&showTitle=false&size=847890&status=done&style=none&taskId=u28351dee-bbd1-4b01-ad09-107f4952352&title=&width=1163" alt="image.png"></p>
<p>注意：临界区是进程中访问临界资源的代码段。进入区和退出区是负责实现互斥的代码段。临界区也可称为“临界段”。</p>
<p>为了实现对临界资源的互斥访问，同时保证系统整体性能，需要遵循以下原则：</p>
<ol>
<li>空闲让进。临界区空闲时，可以允许一个请求进入临界区的进程立即进入临界区；</li>
<li>忙则等待。当已有进程进入临界区时，其他试图进入临界区的进程必须等待；</li>
<li>有限等待。对请求访问的进程，应保证能在有限时间内进入临界区（保证不会饥饿）；</li>
<li>让权等待。当进程不能进入临界区时，应立即释放处理机，防止进程忙等待。</li>
</ol>
<h3 id="知识回顾-1"><a href="#知识回顾-1" class="headerlink" title="知识回顾"></a>知识回顾</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712503647242-e833ad5c-73f8-45b8-b986-1709f792c1d0.png#averageHue=%23d3d0cb&clientId=uccc0ee54-63cc-4&from=paste&height=647&id=u56abb8a4&originHeight=1294&originWidth=2834&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1378239&status=done&style=none&taskId=u575cb4f6-553d-47ad-886f-19f3f449df4&title=&width=1417" alt="image.png"></p>
<h2 id="进程互斥的软件实现方法"><a href="#进程互斥的软件实现方法" class="headerlink" title="进程互斥的软件实现方法"></a>进程互斥的软件实现方法</h2><h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712503729667-f2971097-8380-4b62-af2a-94d1f8a8a176.png#averageHue=%23c8c6c2&clientId=uccc0ee54-63cc-4&from=paste&height=361&id=ued8d07a4&originHeight=722&originWidth=1494&originalType=binary&ratio=2&rotation=0&showTitle=false&size=384623&status=done&style=none&taskId=u35c457cb-ddc1-431a-9963-2eb5a9b9aab&title=&width=747" alt="image.png"></p>
<h3 id="如果没有进程互斥"><a href="#如果没有进程互斥" class="headerlink" title="如果没有进程互斥"></a>如果没有进程互斥</h3><p>如果两个进程同时操作一个资源，那么两个进程就混在一起了！<br>那么如何通过软件来避免进程互斥？</p>
<h3 id="单标志法"><a href="#单标志法" class="headerlink" title="单标志法"></a>单标志法</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712503994059-507dd5a5-95c9-47b9-bb4a-e48a9ecd70d7.png#averageHue=%23dcdada&clientId=uccc0ee54-63cc-4&from=paste&height=684&id=ucc1779c4&originHeight=1368&originWidth=2668&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1660430&status=done&style=none&taskId=ufc21d0be-2469-4a96-ad4d-77072d0b64b&title=&width=1334" alt="image.png"><br>但是这样会有一个问题。<br>如果P0进程执行完成，turn变为1<br>那么当临界区再次空闲， P0却出不去， 违反了空闲让进的原则</p>
<h3 id="双标志先检查法"><a href="#双标志先检查法" class="headerlink" title="双标志先检查法"></a>双标志先检查法</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712504482256-1679cb69-ef98-4379-9442-7327c452f1cc.png#averageHue=%23d5d4d4&clientId=uccc0ee54-63cc-4&from=paste&height=613&id=u97c50dce&originHeight=1226&originWidth=2662&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1662431&status=done&style=none&taskId=u0f7d36e8-04a1-4954-b06c-83f4d882611&title=&width=1331" alt="image.png"><br>因为1，2 。 5，6 。 两步不是原子性，可能导致两个进程同时进入临界区</p>
<p>可以用硬件的方式保证这两步一气呵成！</p>
<h3 id="双标志后检查法"><a href="#双标志后检查法" class="headerlink" title="双标志后检查法"></a>双标志后检查法</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712504632061-4c0f07b8-2c7c-44ca-b9f7-95005575ff6a.png#averageHue=%23d8d7d7&clientId=uccc0ee54-63cc-4&from=paste&height=635&id=u72e8f944&originHeight=1270&originWidth=2716&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1651957&status=done&style=none&taskId=u43d80745-8ba3-4b77-9592-6ea90c1f378&title=&width=1358" alt="image.png"><br>可能P0,P1都无法进入临界区</p>
<h3 id="Peterson算法"><a href="#Peterson算法" class="headerlink" title="Peterson算法"></a>Peterson算法</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712504962342-52ab2763-217b-473b-bd9b-f3fc83cbc1de.png#averageHue=%23dad9d9&clientId=uccc0ee54-63cc-4&from=paste&height=695&id=u48d962d5&originHeight=1390&originWidth=2798&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1746538&status=done&style=none&taskId=ub2fef45f-0b30-40ab-a49b-f4cd6e16f40&title=&width=1399" alt="image.png"></p>
<p>如果p0执行到3进不了临界区就应该立马放弃CPU资源， 但是这里会一直占用CPU资源，违反了让权等待的原则；</p>
<h3 id="知识回顾-2"><a href="#知识回顾-2" class="headerlink" title="知识回顾"></a>知识回顾</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712505192467-8a77e698-aff0-498a-bf6a-c8bfa069927a.png#averageHue=%23cac9c6&clientId=uccc0ee54-63cc-4&from=paste&height=606&id=lZ9tZ&originHeight=1212&originWidth=2612&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1188009&status=done&style=none&taskId=u63ed327f-d5a0-4577-a2fa-6446935215f&title=&width=1306" alt="image.png"></p>
<h2 id="进程互斥方法"><a href="#进程互斥方法" class="headerlink" title="进程互斥方法"></a>进程互斥方法</h2><h3 id="中断屏蔽方法"><a href="#中断屏蔽方法" class="headerlink" title="中断屏蔽方法"></a>中断屏蔽方法</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712535949920-be85f886-ffd2-4114-bae3-c6533922bcd7.png#averageHue=%23dddddd&clientId=uccc0ee54-63cc-4&from=paste&height=591&id=u828c1378&originHeight=1182&originWidth=2654&originalType=binary&ratio=2&rotation=0&showTitle=false&size=942495&status=done&style=none&taskId=u70361b3e-f8b2-4458-aa22-b6b38f1987f&title=&width=1327" alt="image.png"><br>缺点是需要在同一个处理机上。</p>
<h3 id="testAndSet"><a href="#testAndSet" class="headerlink" title="testAndSet"></a>testAndSet</h3><p>有点类似于CAS<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712536261400-7ff69717-7226-47a0-aa5c-607b4a1abbdf.png#averageHue=%23d5d5d5&clientId=uccc0ee54-63cc-4&from=paste&height=416&id=uc58eb104&originHeight=832&originWidth=2710&originalType=binary&ratio=2&rotation=0&showTitle=false&size=906935&status=done&style=none&taskId=u5295e917-164b-40e9-86a1-2a67af6fd34&title=&width=1355" alt="image.png"><br>若刚开始lock 是false，则TSL返回的old 值次false，while 循环条件不满足，直接跳过循环，述入临界区。若刚开始lock 是true，则执行TLS后old 返回的值为 true，while 循环条件满足，会一直循环，直到当前访问临界区的进程在退出区进行“解锁”。<br>相比软件实现方法，TSL指令把“上锁”和“检查”操作用硬件的方式变成了一气呵成的原子操作(while(TSL))。<br>优点：实现简单，无需像软件实现方法那样严格检查是否会有逻辑漏洞；适用于多处理机环境<br>缺点：不满足“让权等待”原则，暂时无法进入临界区的进程会占用CPU并循环执行TSL指令，从而导致“忙等”。</p>
<h3 id="Swap指令"><a href="#Swap指令" class="headerlink" title="Swap指令"></a>Swap指令</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712536488108-c9d8ff29-2c51-41b7-941b-b38f16c89bba.png#averageHue=%23dbdbdb&clientId=uccc0ee54-63cc-4&from=paste&height=660&id=uf87de660&originHeight=1320&originWidth=2640&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1334091&status=done&style=none&taskId=u8444d8ed-6c79-4118-bb60-840ad9f4cf1&title=&width=1320" alt="image.png"><br>跟TSL基本一样</p>
<h3 id="自旋锁"><a href="#自旋锁" class="headerlink" title="自旋锁"></a>自旋锁</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712536651208-b3014174-855b-47e5-87c3-c69d0b789536.png#averageHue=%23ded9d9&clientId=uccc0ee54-63cc-4&from=paste&height=637&id=u16d280f6&originHeight=1274&originWidth=2500&originalType=binary&ratio=2&rotation=0&showTitle=false&size=884207&status=done&style=none&taskId=u47ff847e-a48a-479b-a963-6b9daded81d&title=&width=1250" alt="image.png"></p>
<h3 id="知识回顾-3"><a href="#知识回顾-3" class="headerlink" title="知识回顾"></a>知识回顾</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712536512662-070459dc-e260-42fd-a722-41872d82ad80.png#averageHue=%23dedfdd&clientId=uccc0ee54-63cc-4&from=paste&height=625&id=u4b61efe6&originHeight=1250&originWidth=2736&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1140830&status=done&style=none&taskId=u9ab91707-d696-46f8-b518-411c3e17af5&title=&width=1368" alt="image.png"></p>
<h2 id="信号量机制"><a href="#信号量机制" class="headerlink" title="信号量机制"></a>信号量机制</h2><h3 id="总揽"><a href="#总揽" class="headerlink" title="总揽"></a>总揽</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712538907670-a7e2809c-3eed-41aa-96de-b5ecc32fad77.png#averageHue=%23dedede&clientId=uccc0ee54-63cc-4&from=paste&height=679&id=uf00a92ea&originHeight=1358&originWidth=2376&originalType=binary&ratio=2&rotation=0&showTitle=false&size=893858&status=done&style=none&taskId=u706386fc-a1ee-4939-80f6-18b4d263a8f&title=&width=1188" alt="image.png"><br>很好的解决进程互斥&#x2F;同步问题</p>
<h3 id="信号量机制-1"><a href="#信号量机制-1" class="headerlink" title="信号量机制"></a>信号量机制</h3><p>用户进程可以通过使用操作系统提供的一对原语来对信号量进行操作，从而很方便的实现了进程互斥、进程同步。<br>信号量其实就是一个变量（可以是一个整数，也可以是更复杂的记录型变量），可以用一个信号量来表示系统中某种资源的数量，比如：系统中只有一台打印机，就可以设置一个初值为1的信号量。<br>原语是一种特殊的程序段，其执行只能一气呵成，不可被中断。原语是由关中断&#x2F;开中断指令实现的。软件解决方案的主要问题是由“进入区的各种操作无法一气呵成”，因此如果能把进入区、退出区的操作都用“原语”实现，使这些操作能“一气呵成”就能避免问题。<br>一对原语：wait（S） 原语和 signal（S）原语，可以把原语理解为我们自己写的函数，函数名分别为wait和 signal，括号里的信号量s其实就是函数调用时传入的一个参数。<br>wait、signal 原语常简称为P、V操作（来自荷兰语 proberen 和verhogen）。因此，做题的时候常把wait（S）、Signal（S） 两个操作分别写为P（S）、V（S）</p>
<h3 id="整型信号量"><a href="#整型信号量" class="headerlink" title="整型信号量"></a>整型信号量</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712539565048-7479925e-865a-46c6-9914-cf01d12f7a1e.png#averageHue=%23e3e2e2&clientId=uccc0ee54-63cc-4&from=paste&height=775&id=u419df677&originHeight=1550&originWidth=2834&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1949430&status=done&style=none&taskId=u0a775336-4b88-459f-b6fb-a43e25f8377&title=&width=1417" alt="image.png"><br>有点类似于双标志先检查法，但是这里的while 和 s &#x3D; s-1 是原语实现的，原语是通过开关中断指令实现的，所以这里就完美解决了双标志先检查法带来的判断和执行不能一气呵成的问题</p>
<h3 id="记录型信号量"><a href="#记录型信号量" class="headerlink" title="记录型信号量"></a>记录型信号量</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712540111325-92c13ac2-c157-486b-ab42-519fdd4a300e.png#averageHue=%23e2e2e2&clientId=uccc0ee54-63cc-4&from=paste&height=669&id=u309a1001&originHeight=1338&originWidth=2586&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1196031&status=done&style=none&taskId=ud831d6e3-97f0-409f-8485-a2c9e309f22&title=&width=1293" alt="image.png"><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712540216556-83f4fbb1-4840-42f9-b94f-35d2da50048c.png#averageHue=%23d8d6d6&clientId=uccc0ee54-63cc-4&from=paste&height=666&id=u6ea5f0ed&originHeight=1332&originWidth=2610&originalType=binary&ratio=2&rotation=0&showTitle=false&size=2196652&status=done&style=none&taskId=u8dd65fe8-2b33-48a9-8118-d67edfb9a80&title=&width=1305" alt="image.png"><br>多了一个阻塞队列，资源足够，就从阻塞队列获取一个。<br>解决了让权等待的问题。</p>
<h3 id="梳理"><a href="#梳理" class="headerlink" title="梳理"></a>梳理</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712540282210-b7cff2e3-9eb9-4590-a37e-62b27a2d2136.png#averageHue=%23e9e8e6&clientId=uccc0ee54-63cc-4&from=paste&height=612&id=ufd7a6ac2&originHeight=1224&originWidth=2840&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1394742&status=done&style=none&taskId=u49de418d-5c6e-464b-a807-469200ec356&title=&width=1420" alt="image.png"></p>
<h2 id="用信号量实现同步，互斥，前驱关系"><a href="#用信号量实现同步，互斥，前驱关系" class="headerlink" title="用信号量实现同步，互斥，前驱关系"></a>用信号量实现同步，互斥，前驱关系</h2><h3 id="总揽-1"><a href="#总揽-1" class="headerlink" title="总揽"></a>总揽</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712559421050-7c8aa4ff-7cba-4393-867f-bf93587a4d9c.png#averageHue=%23dddddc&clientId=u94321b27-e9fa-4&from=paste&height=633&id=ueeb16db5&originHeight=1266&originWidth=2462&originalType=binary&ratio=2&rotation=0&showTitle=false&size=815774&status=done&style=none&taskId=ucaaa1070-2bd8-493d-8b93-01b252e004e&title=&width=1231" alt="image.png"></p>
<h3 id="信号量实现进程互斥"><a href="#信号量实现进程互斥" class="headerlink" title="信号量实现进程互斥"></a>信号量实现进程互斥</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712559647201-78e01ab2-1f90-46d7-917e-e026e915467f.png#averageHue=%23d9d6d4&clientId=u94321b27-e9fa-4&from=paste&height=810&id=u902768ee&originHeight=1620&originWidth=2734&originalType=binary&ratio=2&rotation=0&showTitle=false&size=2265737&status=done&style=none&taskId=u6b103ffb-5a0e-4f7d-99bb-26f8d7065c6&title=&width=1367" alt="image.png"></p>
<h3 id="信号量实现进程同步"><a href="#信号量实现进程同步" class="headerlink" title="信号量实现进程同步"></a>信号量实现进程同步</h3><p>让各个并发进程顺序的进行<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712559945960-6cbca89c-cda6-4d6c-bde4-b990643be05c.png#averageHue=%23dddcdc&clientId=u94321b27-e9fa-4&from=paste&height=793&id=u23764ec2&originHeight=1586&originWidth=2766&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1865386&status=done&style=none&taskId=ue5735b47-92c9-4661-bbf4-6f6959f4797&title=&width=1383" alt="image.png"><br>前V 后 P</p>
<h3 id="实现前驱关系"><a href="#实现前驱关系" class="headerlink" title="实现前驱关系"></a>实现前驱关系</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712560063796-15e0ddbc-1b87-4e13-891e-886ff62ab64b.png#averageHue=%23e0dfdf&clientId=u94321b27-e9fa-4&from=paste&height=677&id=u38c6c0b8&originHeight=1354&originWidth=2684&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1271701&status=done&style=none&taskId=ud1ae3a0d-974c-4076-87f2-8d75a0de1f6&title=&width=1342" alt="image.png"><br>应该是在实现同步关系之后的改进版</p>
<h3 id="知识回顾-4"><a href="#知识回顾-4" class="headerlink" title="知识回顾"></a>知识回顾</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712560325917-b86f5be5-fbc2-4348-910c-51ea993e63f6.png#averageHue=%23e4e3e3&clientId=u94321b27-e9fa-4&from=paste&height=835&id=u3a4b4e7f&originHeight=1670&originWidth=2820&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1779804&status=done&style=none&taskId=u5cd1a26a-43ac-428e-b569-fac50eb13ad&title=&width=1410" alt="image.png"></p>
<h2 id="生产者-消费者问题"><a href="#生产者-消费者问题" class="headerlink" title="生产者-消费者问题"></a>生产者-消费者问题</h2><h3 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712572748544-b8ceae5b-5269-457f-8936-8a0ce35fa4f6.png#averageHue=%23e5e1e1&clientId=u81d8c38b-8668-4&from=paste&height=1182&id=u859b79fe&originHeight=1182&originWidth=2285&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1018064&status=done&style=none&taskId=u27fbafe3-900c-45aa-9dd2-5ae8456becc&title=&width=2285" alt="image.png"><br>主要是以缓冲区为媒介来实现生产消费的。<br>但是如果两个生产者进程同时放入缓冲区，可能就会导致覆盖。<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712572946843-989ab63a-c068-4bcf-899c-af49773c0e4d.png#averageHue=%23b3cba0&clientId=u81d8c38b-8668-4&from=paste&height=480&id=u4258cd92&originHeight=480&originWidth=1596&originalType=binary&ratio=1&rotation=0&showTitle=false&size=327605&status=done&style=none&taskId=u1d5d2e92-3afe-4a78-aa37-7c12c68df27&title=&width=1596" alt="image.png"><br>full 和 empty都是信号量<br>对这些临界区来执行PV操作 </p>
<h3 id="如何解决问题"><a href="#如何解决问题" class="headerlink" title="如何解决问题"></a>如何解决问题</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712573353160-1f3c3798-43fd-4e8d-a9ec-c47cd86ff9f0.png#averageHue=%23d5d4d4&clientId=u81d8c38b-8668-4&from=paste&height=1304&id=ucf2a8148&originHeight=1304&originWidth=2503&originalType=binary&ratio=1&rotation=0&showTitle=false&size=1739557&status=done&style=none&taskId=u98026ebd-8bf3-4941-b55e-845fa653281&title=&width=2503" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712573647046-60b19970-1b03-4558-b44c-8275e99d51c4.png#averageHue=%23d7d7d7&clientId=u81d8c38b-8668-4&from=paste&height=1195&id=ue94444be&originHeight=1195&originWidth=2234&originalType=binary&ratio=1&rotation=0&showTitle=false&size=949202&status=done&style=none&taskId=u0edf4e1a-4cc5-48e9-8b1f-89fad08d88f&title=&width=2234" alt="image.png"><br>会发生死锁，因为当缓冲区已经放慢产品，生产者就不会再去放了， 但是mutex已经变为0了， 所以消费者也没有办法去消费， 所以就会导致发生死锁。</p>
<h3 id="知识回顾-5"><a href="#知识回顾-5" class="headerlink" title="知识回顾"></a>知识回顾</h3><p>PV 操作题目的解题思路：</p>
<ol>
<li>关系分析。找出题目中描述的各个进程，分析它们之间的同步、互斥关系。</li>
<li>整理思路。根据各进程的操作流程确定P、V操作的大致顺序。</li>
</ol>
<p>3.’设置信号量。设置需要的信号量，并根据题目条件确定信号量初值。（互斥信号量初值一般为<br>1，同步信号量的初始值要看对应资源的初始值是多少）生产者消费者问题是一个互斥、同步的综合问题。<br>对于初学者来说最难的是发现题目中隐含的两对同步关系。<br>有时候是消费者需要等待生产者生产，有时候是生产者要等待消费者消费，这是两个不同的“一前一后问题”，因此也需要设置两个同步信号量。</p>
<h2 id="多生产者-多消费者"><a href="#多生产者-多消费者" class="headerlink" title="多生产者-多消费者"></a>多生产者-多消费者</h2><h2 id="管程"><a href="#管程" class="headerlink" title="管程"></a>管程</h2><h3 id="总揽-2"><a href="#总揽-2" class="headerlink" title="总揽"></a>总揽</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712560488388-67da8c82-2e6d-4bb6-817f-f35af4358a49.png#averageHue=%23d9d9d9&clientId=u94321b27-e9fa-4&from=paste&height=511&id=u21a36b56&originHeight=1022&originWidth=2038&originalType=binary&ratio=2&rotation=0&showTitle=false&size=566153&status=done&style=none&taskId=u839c4d36-ac3e-4bcd-80cd-33aa44090a9&title=&width=1019" alt="image.png"></p>
<h3 id="为什么引入管程"><a href="#为什么引入管程" class="headerlink" title="为什么引入管程"></a>为什么引入管程</h3><p>管程是一种特殊的软件模块，有这些部分组成：</p>
<ol>
<li>局部于管程的共享数据结构说明；</li>
<li>对该数据结构进行操作的一组过程；</li>
<li>对局部于管程的共享数据设置初始值的语句；</li>
<li>管程有一个名字。<br>跨考Tips：“过程〞其实就是“函数”<br>管程的基本特征：</li>
<li>局部于管程的数据只能被局部于管程的过程所访问；</li>
<li>一个进程只有通过调用管程内的过程才能进入管程访问共享数据；</li>
<li>每次仅允许一个进程在管程内执行某个内部过程。</li>
</ol>
<h3 id="用管程解决生产者消费者问题"><a href="#用管程解决生产者消费者问题" class="headerlink" title="用管程解决生产者消费者问题"></a>用管程解决生产者消费者问题</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712645365255-feffbba1-5519-4004-972e-c4fe2bd97675.png#averageHue=%23dfdedd&clientId=u55913563-8725-4&from=paste&height=790&id=u832c3b9c&originHeight=1580&originWidth=2768&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1821309&status=done&style=none&taskId=u0b5eed29-c1f2-4cb3-9b59-22784d04a78&title=&width=1384" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712645850554-d0f9af27-0ad9-4b23-a8c3-1f02c2ce345c.png#averageHue=%23d6d5d5&clientId=u55913563-8725-4&from=paste&height=651&id=ubb153d00&originHeight=1302&originWidth=2460&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1555580&status=done&style=none&taskId=u047169d5-c766-4756-9090-21a79925580&title=&width=1230" alt="image.png"><br>总之就是避免发生并发问题。</p>
<p>来点跟Java有关的</p>
<ul>
<li>sychronized其实就事管程实现的</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712645959997-9efc97bf-7cab-444b-834e-d6b16078fc80.png#averageHue=%23dfdfdf&clientId=u55913563-8725-4&from=paste&height=611&id=u8b73b519&originHeight=1222&originWidth=2686&originalType=binary&ratio=2&rotation=0&showTitle=false&size=922613&status=done&style=none&taskId=uade22616-da84-41f9-b2ae-27491257eee&title=&width=1343" alt="image.png"></p>
<h3 id="知识回顾-6"><a href="#知识回顾-6" class="headerlink" title="知识回顾"></a>知识回顾</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712646017027-f71b67df-3f45-4fa9-ba83-52e4e02d0579.png#averageHue=%23d1cac7&clientId=u55913563-8725-4&from=paste&height=623&id=ub814cdc2&originHeight=1246&originWidth=2606&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1147551&status=done&style=none&taskId=u19c57c6e-812e-4bcc-a750-8c78d8beea0&title=&width=1303" alt="image.png"> </p>
<h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><h3 id="什么是死锁"><a href="#什么是死锁" class="headerlink" title="什么是死锁"></a>什么是死锁</h3><p>在并发环境下，各进程因竞争资源而造成的一种互相等待对方手里的资源，导致各进程都阻塞，都无法向前推进的现象，就是“死锁”发生死锁后若无外力干涉，这些进程都将无法向前推进。<br>比如：经典的哲学家进餐问题</p>
<h3 id="死锁、死循环、饥饿的区别"><a href="#死锁、死循环、饥饿的区别" class="headerlink" title="死锁、死循环、饥饿的区别"></a>死锁、死循环、饥饿的区别</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712646550985-45757931-455e-4bf1-a401-b6a9a22617fb.png#averageHue=%23eaf1ec&clientId=u55913563-8725-4&from=paste&height=650&id=u106d85db&originHeight=1300&originWidth=2518&originalType=binary&ratio=2&rotation=0&showTitle=false&size=2550299&status=done&style=none&taskId=ueb822214-a23a-4b56-bf90-cc8268a6cf5&title=&width=1259" alt="image.png"></p>
<h3 id="什么时候会发生死锁"><a href="#什么时候会发生死锁" class="headerlink" title="什么时候会发生死锁"></a>什么时候会发生死锁</h3><ol>
<li><p>对系统资源的竟争。各进程对不可剥夺的资源（如打印机）的竞争可能引起死锁，对可剥夺的资<br>原（CPU）的竟争是不会引起死锁的。<br>2.进程推进顺序非法。请求和释放资源的顺序不当，也同样会导致死锁。例如，并发执行的进程P1、<br>P2 分别申请并占有了资源 R1、R2，之后进程P1又紧接着申请资源R2，而进程P2又申请资源R1，<br>两者会因为申请的资源被对方占有而阻塞，从而发生死锁。</p>
</li>
<li><p>信号量的使用不当也会造成死锁。如生产者-消贵者问题中，如果实现互斥的P操作在实现同步的</p>
</li>
</ol>
<p>p操作之前，就有可能导致死锁。（可以把互斥信号量、同步信号量也看做是一种抽象的系统资<br>源）<br>总之，对不可剥夺资源的不合理分配，可能导致死锁。</p>
<h3 id="梳理-1"><a href="#梳理-1" class="headerlink" title="梳理"></a>梳理</h3><p><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712646952739-2a01b44b-9cb3-48bb-aabf-7fd2571a91bb.png#averageHue=%23e4e2de&clientId=u55913563-8725-4&from=paste&height=708&id=u4bd57858&originHeight=1416&originWidth=2372&originalType=binary&ratio=2&rotation=0&showTitle=false&size=1464894&status=done&style=none&taskId=u14c864a9-adde-4b33-a851-e604a5f5f56&title=&width=1186" alt="image.png"></p>
<h2 id="预防死锁"><a href="#预防死锁" class="headerlink" title="预防死锁"></a>预防死锁</h2><p>死锁必须满足四个条件<br><img src="https://cdn.nlark.com/yuque/0/2024/png/38717174/1712647008920-135a4f89-5886-43fc-8d67-2b15fb731a0e.png#averageHue=%23ccccca&clientId=u55913563-8725-4&from=paste&height=316&id=u6247cd5a&originHeight=632&originWidth=1376&originalType=binary&ratio=2&rotation=0&showTitle=false&size=283401&status=done&style=none&taskId=u6e9a2a38-ff1b-4343-9ceb-6de54464579&title=&width=688" alt="image.png"></p>
<p>最常见的并且可行的就是<strong>使用资源有序分配法，来破环环路等待条件</strong>。</p>
<p> Java中怎么排查死锁？</p>
<blockquote>
<p> 步骤一：使用jsp查找程序进行 jps：jdk提供的一个工具，可以查看到正在运行的java进程 </p>
<p>步骤二：使用jstack查看线程堆栈信息 jstack：jdk提供的一个工具，可以查看java进程中线程堆栈信息。 更详细的用法见文档最后。 </p>
<p>$ jstack 96521复制代码 从上面的堆栈信息中我们可以发现这个内容：“Found one Java-level deadlock”，表示程序中发现了一个死锁，后面包含更多详细的信息，重点下面： 死</p>
<p>锁的代码是在DeadLock.java的32行和18行，此时我们就可以去优化代码，解决死锁问题。</p>
</blockquote>
<p>还可以通过jconsole</p>
</div><div class="p-copyright"><blockquote><div class="p-copyright-author"><span class="p-copyright-key">本文作者：</span><span class="p-copytight-value"><a href="mailto:litreily@163.com">Lorain</a></span></div><div class="p-copyright-link"><span class="p-copyright-key">本文链接：</span><span class="p-copytight-value"><a href="/posts/852cfab6.html">https://blog.lorainjay.icu/posts/852cfab6.html</a></span></div><div class="p-copyright-note"><span class="p-copyright-key">版权声明：</span><span class="p-copytight-value">本博客所有文章除特殊声明外，均采用<a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"> CC BY-NC 4.0 </a>许可协议。转载请注明出处 <a href="https://blog.lorainjay.icu">Lorain的博客</a>！</span></div></blockquote></div></article><div class="p-info box"><span class="p-tags"><i class="fa fa-tag"></i><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></span></div><aside id="toc"><div class="toc-title">目录</div><nav><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%A6%82%E5%BF%B5%EF%BC%8C%E7%BB%84%E6%88%90%E7%89%B9%E5%BE%81"><span class="toc-number">1.</span> <span class="toc-text">进程的概念，组成特征</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%80%BB%E8%A7%88"><span class="toc-number">1.1.</span> <span class="toc-text">知识总览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">1.2.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E6%88%90"><span class="toc-number">1.3.</span> <span class="toc-text">组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E7%BB%87"><span class="toc-number">1.4.</span> <span class="toc-text">组织</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E5%BE%81"><span class="toc-number">1.5.</span> <span class="toc-text">特征</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.6.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8E%A7%E5%88%B6"><span class="toc-number">2.</span> <span class="toc-text">进程的控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E6%80%BB%E8%A7%88-1"><span class="toc-number">2.1.</span> <span class="toc-text">知识总览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">2.2.</span> <span class="toc-text">什么是进程控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">2.3.</span> <span class="toc-text">如何实现进程控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E7%9B%B8%E5%85%B3%E7%9A%84%E5%8E%9F%E8%AF%AD"><span class="toc-number">2.4.</span> <span class="toc-text">控制相关的原语</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">2.5.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1"><span class="toc-number">3.</span> <span class="toc-text">进程通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%94%AF%E6%8C%81"><span class="toc-number">3.1.</span> <span class="toc-text">为什么需要操作系统支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8"><span class="toc-number">3.2.</span> <span class="toc-text">共享存储</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92"><span class="toc-number">3.3.</span> <span class="toc-text">消息传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E6%A2%B3%E7%90%86"><span class="toc-number">3.4.</span> <span class="toc-text">知识点梳理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">4.</span> <span class="toc-text">线程的概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BC%95%E5%85%A5%E7%BA%BF%E7%A8%8B"><span class="toc-number">4.1.</span> <span class="toc-text">为什么引入线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E7%BA%BF%E7%A8%8B%E6%9C%BA%E5%88%B6%E5%90%8E%E6%9C%89%E4%BB%80%E4%B9%88%E5%8F%98%E5%8C%96"><span class="toc-number">4.2.</span> <span class="toc-text">引入线程机制后有什么变化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">4.3.</span> <span class="toc-text">线程的属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E5%92%8C%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B"><span class="toc-number">5.</span> <span class="toc-text">线程的实现方式和多线程模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">5.1.</span> <span class="toc-text">线程的实现方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A9%E6%9C%9F"><span class="toc-number">5.1.1.</span> <span class="toc-text">早期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8E%B0%E4%BB%A3"><span class="toc-number">5.1.2.</span> <span class="toc-text">现代</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE"><span class="toc-number">5.2.</span> <span class="toc-text">知识回顾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81%E4%B8%8E%E8%BD%AC%E6%8D%A2"><span class="toc-number">6.</span> <span class="toc-text">线程的状态与转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E4%B8%8E%E8%BD%AC%E6%8D%A2"><span class="toc-number">6.1.</span> <span class="toc-text">状态与转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E7%BB%87%E4%B8%8E%E6%8E%A7%E5%88%B6"><span class="toc-number">6.2.</span> <span class="toc-text">组织与控制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6"><span class="toc-number">7.</span> <span class="toc-text">处理机调度</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E8%B0%83%E5%BA%A6"><span class="toc-number">7.1.</span> <span class="toc-text">高级调度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%8E%E7%BA%A7%E8%B0%83%E5%BA%A6"><span class="toc-number">7.2.</span> <span class="toc-text">低级调度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E7%BA%A7%E8%B0%83%E5%BA%A6"><span class="toc-number">7.3.</span> <span class="toc-text">中级调度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A5%E5%85%85"><span class="toc-number">7.4.</span> <span class="toc-text">补充</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6%E7%9A%84%E6%97%B6%E6%9C%BA%E5%88%87%E6%8D%A2%E4%B8%8E%E8%BF%87%E7%A8%8B%E8%B0%83%E5%BA%A6%E6%96%B9%E5%BC%8F"><span class="toc-number">8.</span> <span class="toc-text">进程调度的时机切换与过程调度方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6%E6%97%B6%E6%9C%BA"><span class="toc-number">8.1.</span> <span class="toc-text">进程调度时机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6%E7%9A%84%E6%97%B6%E6%9C%BA"><span class="toc-number">8.2.</span> <span class="toc-text">进程调度的时机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">8.3.</span> <span class="toc-text">进程调度的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%88%87%E6%8D%A2%E4%B8%8E%E8%BF%87%E7%A8%8B"><span class="toc-number">8.4.</span> <span class="toc-text">进程的切换与过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-2"><span class="toc-number">8.5.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E5%BA%A6%E5%99%A8%EF%BC%8C%E9%97%B2%E9%80%9B%E8%BF%9B%E7%A8%8B"><span class="toc-number">9.</span> <span class="toc-text">调度器，闲逛进程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95%E7%9A%84%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87"><span class="toc-number">10.</span> <span class="toc-text">调度算法的评价指标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95"><span class="toc-number">11.</span> <span class="toc-text">调度算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E6%9D%A5%E5%85%88%E6%9C%8D%E5%8A%A1"><span class="toc-number">11.1.</span> <span class="toc-text">先来先服务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%E3%80%81%E4%BA%92%E6%96%A5"><span class="toc-number">12.</span> <span class="toc-text">进程同步、互斥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5%E3%80%81%E5%BC%82%E6%AD%A5%E3%80%81%E4%B8%B4%E7%95%8C%E5%8C%BA"><span class="toc-number">12.1.</span> <span class="toc-text">进程同步、异步、临界区</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE-1"><span class="toc-number">12.2.</span> <span class="toc-text">知识回顾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%BA%92%E6%96%A5%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-number">13.</span> <span class="toc-text">进程互斥的软件实现方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">13.1.</span> <span class="toc-text">知识点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E8%BF%9B%E7%A8%8B%E4%BA%92%E6%96%A5"><span class="toc-number">13.2.</span> <span class="toc-text">如果没有进程互斥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E6%A0%87%E5%BF%97%E6%B3%95"><span class="toc-number">13.3.</span> <span class="toc-text">单标志法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8C%E6%A0%87%E5%BF%97%E5%85%88%E6%A3%80%E6%9F%A5%E6%B3%95"><span class="toc-number">13.4.</span> <span class="toc-text">双标志先检查法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8C%E6%A0%87%E5%BF%97%E5%90%8E%E6%A3%80%E6%9F%A5%E6%B3%95"><span class="toc-number">13.5.</span> <span class="toc-text">双标志后检查法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Peterson%E7%AE%97%E6%B3%95"><span class="toc-number">13.6.</span> <span class="toc-text">Peterson算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE-2"><span class="toc-number">13.7.</span> <span class="toc-text">知识回顾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%BA%92%E6%96%A5%E6%96%B9%E6%B3%95"><span class="toc-number">14.</span> <span class="toc-text">进程互斥方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E5%B1%8F%E8%94%BD%E6%96%B9%E6%B3%95"><span class="toc-number">14.1.</span> <span class="toc-text">中断屏蔽方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#testAndSet"><span class="toc-number">14.2.</span> <span class="toc-text">testAndSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Swap%E6%8C%87%E4%BB%A4"><span class="toc-number">14.3.</span> <span class="toc-text">Swap指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E6%97%8B%E9%94%81"><span class="toc-number">14.4.</span> <span class="toc-text">自旋锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE-3"><span class="toc-number">14.5.</span> <span class="toc-text">知识回顾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E9%87%8F%E6%9C%BA%E5%88%B6"><span class="toc-number">15.</span> <span class="toc-text">信号量机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E6%8F%BD"><span class="toc-number">15.1.</span> <span class="toc-text">总揽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E9%87%8F%E6%9C%BA%E5%88%B6-1"><span class="toc-number">15.2.</span> <span class="toc-text">信号量机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E5%9E%8B%E4%BF%A1%E5%8F%B7%E9%87%8F"><span class="toc-number">15.3.</span> <span class="toc-text">整型信号量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B0%E5%BD%95%E5%9E%8B%E4%BF%A1%E5%8F%B7%E9%87%8F"><span class="toc-number">15.4.</span> <span class="toc-text">记录型信号量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A2%B3%E7%90%86"><span class="toc-number">15.5.</span> <span class="toc-text">梳理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%AE%9E%E7%8E%B0%E5%90%8C%E6%AD%A5%EF%BC%8C%E4%BA%92%E6%96%A5%EF%BC%8C%E5%89%8D%E9%A9%B1%E5%85%B3%E7%B3%BB"><span class="toc-number">16.</span> <span class="toc-text">用信号量实现同步，互斥，前驱关系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E6%8F%BD-1"><span class="toc-number">16.1.</span> <span class="toc-text">总揽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%AE%9E%E7%8E%B0%E8%BF%9B%E7%A8%8B%E4%BA%92%E6%96%A5"><span class="toc-number">16.2.</span> <span class="toc-text">信号量实现进程互斥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E9%87%8F%E5%AE%9E%E7%8E%B0%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5"><span class="toc-number">16.3.</span> <span class="toc-text">信号量实现进程同步</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%89%8D%E9%A9%B1%E5%85%B3%E7%B3%BB"><span class="toc-number">16.4.</span> <span class="toc-text">实现前驱关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE-4"><span class="toc-number">16.5.</span> <span class="toc-text">知识回顾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E4%BA%A7%E8%80%85-%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98"><span class="toc-number">17.</span> <span class="toc-text">生产者-消费者问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0"><span class="toc-number">17.1.</span> <span class="toc-text">问题描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98"><span class="toc-number">17.2.</span> <span class="toc-text">如何解决问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE-5"><span class="toc-number">17.3.</span> <span class="toc-text">知识回顾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E7%94%9F%E4%BA%A7%E8%80%85-%E5%A4%9A%E6%B6%88%E8%B4%B9%E8%80%85"><span class="toc-number">18.</span> <span class="toc-text">多生产者-多消费者</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%A8%8B"><span class="toc-number">19.</span> <span class="toc-text">管程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E6%8F%BD-2"><span class="toc-number">19.1.</span> <span class="toc-text">总揽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BC%95%E5%85%A5%E7%AE%A1%E7%A8%8B"><span class="toc-number">19.2.</span> <span class="toc-text">为什么引入管程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E7%AE%A1%E7%A8%8B%E8%A7%A3%E5%86%B3%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85%E9%97%AE%E9%A2%98"><span class="toc-number">19.3.</span> <span class="toc-text">用管程解决生产者消费者问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE-6"><span class="toc-number">19.4.</span> <span class="toc-text">知识回顾</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%BB%E9%94%81"><span class="toc-number">20.</span> <span class="toc-text">死锁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%BB%E9%94%81"><span class="toc-number">20.1.</span> <span class="toc-text">什么是死锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%BB%E9%94%81%E3%80%81%E6%AD%BB%E5%BE%AA%E7%8E%AF%E3%80%81%E9%A5%A5%E9%A5%BF%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">20.2.</span> <span class="toc-text">死锁、死循环、饥饿的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E4%BC%9A%E5%8F%91%E7%94%9F%E6%AD%BB%E9%94%81"><span class="toc-number">20.3.</span> <span class="toc-text">什么时候会发生死锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A2%B3%E7%90%86-1"><span class="toc-number">20.4.</span> <span class="toc-text">梳理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%84%E9%98%B2%E6%AD%BB%E9%94%81"><span class="toc-number">21.</span> <span class="toc-text">预防死锁</span></a></li></ol></nav></aside></div><section class="p-ext"><div class="l-pager l-pager-dtl box"><a class="next" href="/posts/4a58d47c.html">手写mini-HashMap &gt;</a></div></section><footer><p>Copyright © 2016 - 2024 <a href="/." rel="nofollow">Lorain's Blog</a> | <strong><a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong><br><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span></span> <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span></span> | Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a>Theme with<a rel="nofollow" target="_blank" href="https://github.com/litreily/snark-hexo"> snark.</a></p></footer></div></div></div><script type="text/javascript" src="/js/search.js"></script><script type="text/javascript" src="/js/top.js"></script><script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
    search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script></body></html>